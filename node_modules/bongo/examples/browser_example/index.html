<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Shared example | bongo</title>
	<!-- Date: 2011-10-25 -->
  <script src="/bongo.js" type="text/javascript"></script>
  <script src="http://jashkenas.github.com/coffee-script/extras/coffee-script.js"></script>
  <script type="text/coffeescript">
    
    window.onload = ->

      bongo
        .connect (api)->

          {Shared} = api

          Shared.sayHi (hi)-> console.log hi
          
          Shared.sayHiToUser (hi, client)-> console.log arguments
          
          # instantiation
          myShared = new Shared
            title: 'Chris'
            body: 'is Kule!!!111'
          
          # listening
          .on 'save', ->
            console.log 'model was saved', arguments

          .on 'validate', ->
            console.log 'model was validated', arguments
          
          # errors that are emitted (experimental for this api)
          .on 'error', ->
            console.log 'model emitted an error', arguments
            
          # save to the databse
          .save (err)->
            console.log 'save error: ', err

          setTimeout ->
          
            # search by query (mongodb only for now)
            Shared.one title: 'Chris', (err, shared)->
              throw err if err
              
              console.log shared
              
              shared.title = "Kris - set from the client"
              shared.save (err)->
                console.log 'save error: ', err

          , 5000
  </script>
</head>
<body>

</body>
</html>
