<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Shared example | bongo</title>
	<!-- Date: 2011-10-25 -->
  <script src="/bongo.js" type="text/javascript"></script>
  <script src="http://jashkenas.github.com/coffee-script/extras/coffee-script.js"></script>
  <script type="text/coffeescript">
    
    window.onload = ->
      
      bongo
        .connect (api)->

          {Shared, Account} = api
          
          sinanAccount = new Account
            nickname: 'sinan'+Math.random()
            avatar: 'sinan.png'
          
          sinanAccount.save (err)->
            throw err if err
          
          Account.one nickname: 'sinan', (err, account)->
            console.log err, account
          
          Account.all {}, (err, accounts)->
            console.log err, accounts
          
          
          Shared.sayHi (hi)-> console.log hi

          myShared = new Shared
            title: 'Chris'
            body: 'is Kule!!!111'

          myShared.on 'save', ->
            console.log 'model was saved', arguments

          myShared.on 'validate', ->
            console.log 'model was validated', arguments

          myShared.on 'error', ->
            console.log 'model emitted an error', arguments

          myShared.save (err)->
            console.log 'save error: ', err

          setTimeout ->

            Shared.one title: 'Chris', (err, shared)->
              throw err if err
              shared.title = "Kris - set from the client"
              shared.save (err)->
                console.log 'save error: ', err

          , 5000
  </script>
</head>
<body>

</body>
</html>
