<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Shared example | bongo</title>
  <!-- Date: 2011-10-25 -->
  <script src="/bongo.js" type="text/javascript"></script>
  <script src="http://jashkenas.github.com/coffee-script/extras/coffee-script.js"></script>
  <script type="text/coffeescript">
    
    window.onload = ->

      bongo
        .connect (api)->
          {Shared} = api
          
          shared = new Shared
            title : 'egg'
            body  : 'foo'
            nest  : 
              property1: 'hello'

          shared.save (err, docs)->
            {_id} = docs
            shared._id = _id
            
            shared.on 'update', ->
              console.log @, 'was updated'
            
            setTimeout ->
              shared.update {$unset: 'nest.property1': 1}, (err)-> console.log err, shared
            , 5000
          
  </script>
</head>
<body>

</body>
</html>
