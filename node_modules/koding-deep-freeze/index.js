module.exports = function deepFreeze (o) {
  Object.freeze(o); // First freeze the object.
  for (prop in o) {
    if (!o.hasOwnProperty(prop) || !(typeof o === "object") || Object.isFrozen(o)) {
      // If the object is on the prototype, not an object, or is already frozen, 
      // skip it. Note that this might leave an unfrozen reference somewhere in the
      // object if there is an already frozen object containing an unfrozen object.
      continue;
    }
 
    deepFreeze(o[prop]); // Recursively call deepFreeze.
  }
  return o; // added the return value - chris@koding
};